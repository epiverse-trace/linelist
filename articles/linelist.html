<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>An introduction to linelist • linelist</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="An introduction to linelist">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">linelist</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.1.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/linelist.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/compat-dplyr.html">Compatibility with dplyr</a></li>
    <li><a class="dropdown-item" href="../articles/design-principles.html">Design Principles for linelist</a></li>
    <li><a class="dropdown-item" href="../articles/software-permissions.html">Software permissions and regulations</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiverse-trace/linelist/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>An introduction to linelist</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/linelist/blob/v1.1.4/vignettes/linelist.Rmd" class="external-link"><code>vignettes/linelist.Rmd</code></a></small>
      <div class="d-none name"><code>linelist.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://epiverse-trace.github.io/linelist/">linelist</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="motivations">Motivations<a class="anchor" aria-label="anchor" href="#motivations"></a>
</h2>
<p>Outbreak analytics pipelines often start with <em>case line
lists</em>, which are data tables in which every line is a different
case/patient, and columns record different variables of potential
epidemiological interest such as date of events (e.g. onset of symptom,
case notification), disease outcome, or patient data (e.g. age, sex,
occupation). Such data is typically held in a <code>data.frame</code>
(or a <code>tibble</code>) and used in various downstream analysis.
While this approach is functional, it often means that each analysis
step will:</p>
<ol style="list-style-type: decimal">
<li><p>need to check the required inputs are present in the data, and
for the user to specify where (e.g. ‘<em>This is the column where dates
of onset are stored.</em>’)</p></li>
<li><p>need to validate the required data (e.g. ‘<em>Check that the
field storing dates of onset are indeed dates, and not a
<code>character</code>.</em>’)</p></li>
</ol>
<p>The aim of <em>linelist</em> is to take care of these pre-requisites
once and for all before downstream analyses, thus helping to make data
pipelines more robust and straightforward.</p>
</div>
<div class="section level2">
<h2 id="linelist-in-a-nutshell">linelist in a nutshell<a class="anchor" aria-label="anchor" href="#linelist-in-a-nutshell"></a>
</h2>
<div class="section level3">
<h3 id="outline">Outline<a class="anchor" aria-label="anchor" href="#outline"></a>
</h3>
<p><em>linelist</em> is an R package which implements basic data
representation for case line lists, alongside accessors and basic
methods. It essentially provides three types of functionalities:</p>
<ol style="list-style-type: decimal">
<li><p><strong>tagging</strong>: a <em>tags</em> system permits to
pre-identify key epidemiological variables needed in downstream analyses
(e.g. dates of case notification, symptom onset, age, gender, disease
outcome)</p></li>
<li><p><strong>validation</strong>: functions checking that tagged
variables are indeed present in the <code>data.frame/tibble</code>, and
that they have the expected type (e.g. checking that dates are
<code>Date</code>, <code>integer</code> or
<code>numeric</code>)</p></li>
<li><p><strong>secured methods</strong>: generic functions which could
lead to the loss of tagged variables have dedicated methods for
<em>linelist</em> objects with adapted behaviours, either updating tags
as needed (<em>e.g.</em> <code><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename()</a></code>,
<code>names() &lt;-    ...</code>) or issuing warnings/errors when
tagged variables are lost (<em>e.g.</em> <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code>,
<code>x[]</code>, <code>x[[]]</code>)</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="should-i-use-linelist">Should I use <em>linelist</em>?<a class="anchor" aria-label="anchor" href="#should-i-use-linelist"></a>
</h3>
<p><em>linelist</em> is designed to add a robust, foundational layer to
your data pipelines, but it might add unnecessary complexity to your
analysis scripts. Here are a few hints to gauge if you should consider
using the package.</p>
<p><strong>You may have use for <em>linelist</em> if …</strong>:</p>
<ul>
<li><p>your data changes/updates over time (e.g. new entries, new
variables, renamed variables)</p></li>
<li><p>you build data pipelines entailing multiple layers of data
processing and analysis</p></li>
<li><p>you are looking to build re-useable analysis scripts,
<em>i.e.</em> which will work on other datasets with minimal added
changes</p></li>
</ul>
<p><strong>Conversely, you probably do not need it if …</strong>:</p>
<ul>
<li><p>you work on historical data, which has likely already been
curated/validated and will no longer change</p></li>
<li><p>you perform some quick, simple analysis of your data, which you
will not need to expand on later</p></li>
<li><p>your analysis scripts are very specific and will not be re-used
elsewhere</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>Our stable versions are released periodically on CRAN, and can be
installed using:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"linelist"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>If you prefer using the latest features and bug fixes, you can
alternatively install the development version of <em>linelist</em> from
<a href="https://github.com/" class="external-link">GitHub</a> using the following
commands:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"epiverse-trace/linelist"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Once installed, you can load the package in your R session using:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://epiverse-trace.github.io/linelist/">linelist</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="key-functionalities">Key functionalities<a class="anchor" aria-label="anchor" href="#key-functionalities"></a>
</h3>
<p>A <code>linelist</code> object is an instance of a
<code>data.frame</code> or a <code>tibble</code> in which key
epidemiological variables have been <em>tagged</em>. The main features
of the packages are broken down into the 3 categories outlined
above.</p>
<div class="section level4">
<h4 id="tagging-system">Tagging system<a class="anchor" aria-label="anchor" href="#tagging-system"></a>
</h4>
<p>Tags are paired keys pointing a reference epidemiological variables
to the name of a column in a <code>data.frame</code> or
<code>tibble</code>. The tagging system permits to construct
<code>linelist</code> objects, modify tags in existing objects, check
and access existing tags and the corresponding variables.</p>
<ul>
<li><p><code><a href="../reference/make_linelist.html">make_linelist()</a></code>: to create a <code>linelist</code>
object by tagging key epi variables in a <code>data.frame</code> or a
<code>tibble</code></p></li>
<li><p><code><a href="../reference/set_tags.html">set_tags()</a></code>: to add, remove, or modify tags in a
<code>linelist</code></p></li>
<li><p><code><a href="../reference/tags.html">tags()</a></code>: to list variables which have been tagged in
a <code>linelist</code></p></li>
<li><p><code><a href="../reference/tags_names.html">tags_names()</a></code>: to list all recognized tag names;
details on what the tags represent can be found at <a href="https://epiverse-trace.github.io/linelist/reference/make_linelist.html"><code>?make_linelist</code></a></p></li>
<li><p><code><a href="../reference/tags_df.html">tags_df()</a></code>: to obtain a <code>data.frame</code> of
all the tagged variables in a <code>linelist</code></p></li>
</ul>
</div>
<div class="section level4">
<h4 id="validation">Validation<a class="anchor" aria-label="anchor" href="#validation"></a>
</h4>
<p>Basic routines are provided to validate <em>linelist</em> objects.
More advanced validation e.g. looking at compatibility of dated events
will be implemented in a separate package.</p>
<ul>
<li><p><code><a href="../reference/validate_tags.html">validate_tags()</a></code>: check that tagged variables are
present in the dataset, that tags match the pre-defined list of tagged
variables</p></li>
<li><p><code><a href="../reference/validate_types.html">validate_types()</a></code>: check that tagged variables have
an acceptable class, as defined in <code><a href="../reference/tags_types.html">tags_types()</a></code></p></li>
<li><p><code><a href="../reference/validate_linelist.html">validate_linelist()</a></code>: general validation of
<em>linelist</em> objects, equivalent to running both
<code><a href="../reference/validate_tags.html">validate_tags()</a></code> and <code><a href="../reference/validate_types.html">validate_types()</a></code>, and
checking the class of the object</p></li>
</ul>
</div>
<div class="section level4">
<h4 id="secured-methods">Secured methods<a class="anchor" aria-label="anchor" href="#secured-methods"></a>
</h4>
<p>These are dedicated S3 methods for existing generics which can be
used to prevent the loss of tagged variables.</p>
<ul>
<li><p><code><a href="../reference/lost_tags_action.html">lost_tags_action()</a></code>: to set the behaviour to adopt
when tagged variables would be lost by an operation: issue a warning
(default), an error, or ignore</p></li>
<li><p><code><a href="../reference/lost_tags_action.html">get_lost_tags_action()</a></code>: to check the current
behaviour for lost tagged variables</p></li>
<li><p><code>names&lt;-()</code>: the ‘base R’ approach to renaming
columns of a <code>linelist</code>; will rename tags as needed to match
the new column names</p></li>
<li><p><code>x[]</code> and <code>x[[]]</code>: for subsetting columns
using ‘base R’ syntax; will behave according to
<code>get_lost_tags_actions()</code> if tagged variables are
lost</p></li>
</ul>
</div>
</div>
</div>
<div class="section level2">
<h2 id="worked-example">Worked example<a class="anchor" aria-label="anchor" href="#worked-example"></a>
</h2>
<div class="section level3">
<h3 id="example-dataset">Example dataset<a class="anchor" aria-label="anchor" href="#example-dataset"></a>
</h3>
<p>In this example, we use the case line list of the Hagelloch 1861
measles outbreak, distributed by the <em>outbreaks</em> package as
<code>measles_hagelloch_1861</code> .</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">measles_hagelloch_1861</span>, package <span class="op">=</span> <span class="st">"outbreaks"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># overview of the data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">measles_hagelloch_1861</span><span class="op">)</span></span>
<span><span class="co">#&gt;   case_ID infector date_of_prodrome date_of_rash date_of_death age gender</span></span>
<span><span class="co">#&gt; 1       1       45       1861-11-21   1861-11-25          &lt;NA&gt;   7      f</span></span>
<span><span class="co">#&gt; 2       2       45       1861-11-23   1861-11-27          &lt;NA&gt;   6      f</span></span>
<span><span class="co">#&gt; 3       3      172       1861-11-28   1861-12-02          &lt;NA&gt;   4      f</span></span>
<span><span class="co">#&gt; 4       4      180       1861-11-27   1861-11-28          &lt;NA&gt;  13      m</span></span>
<span><span class="co">#&gt; 5       5       45       1861-11-22   1861-11-27          &lt;NA&gt;   8      f</span></span>
<span><span class="co">#&gt; 6       6      180       1861-11-26   1861-11-29          &lt;NA&gt;  12      m</span></span>
<span><span class="co">#&gt;   family_ID class complications x_loc y_loc</span></span>
<span><span class="co">#&gt; 1        41     1           yes 142.5 100.0</span></span>
<span><span class="co">#&gt; 2        41     1           yes 142.5 100.0</span></span>
<span><span class="co">#&gt; 3        41     0           yes 142.5 100.0</span></span>
<span><span class="co">#&gt; 4        61     2           yes 165.0 102.5</span></span>
<span><span class="co">#&gt; 5        42     1           yes 145.0 120.0</span></span>
<span><span class="co">#&gt; 6        42     2           yes 145.0 120.0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="creating-a-linelist-object">Creating a <em>linelist</em> object<a class="anchor" aria-label="anchor" href="#creating-a-linelist-object"></a>
</h3>
<p>Let us assume we want to tag the following variables to facilitate
downstream analyses, after having checked their tag name in
<code><a href="../reference/make_linelist.html">?make_linelist</a></code>:</p>
<ul>
<li>the date of symptom onset, here called <code>prodrome</code> (tag:
<code>date_onset</code>)</li>
<li>the date of death (tag: <code>date_death</code>)</li>
<li>the age of the patient (tag: <code>age</code>)</li>
<li>the gender of the patient (tag: <code>gender</code>)</li>
</ul>
<p>We first load a few useful packages, and create a
<code>linelist</code> with the above information:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span> <span class="co"># data.frame but with nice printing</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span> <span class="co"># for data handling</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span> <span class="co"># for the %&gt;% operator</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://epiverse-trace.github.io/linelist/">linelist</a></span><span class="op">)</span> <span class="co"># this package!</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">measles_hagelloch_1861</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/make_linelist.html">make_linelist</a></span><span class="op">(</span>date_onset <span class="op">=</span> <span class="st">"date_of_prodrome"</span>,</span>
<span>                date_death <span class="op">=</span> <span class="st">"date_of_death"</span>,</span>
<span>                age <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>                gender <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // linelist object</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 12</span></span></span>
<span><span class="co">#&gt;   case_ID infector date_of_prodrome date_of_rash date_of_death   age gender</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>       1       45 1861-11-21       1861-11-25   <span style="color: #BB0000;">NA</span>                7 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>       2       45 1861-11-23       1861-11-27   <span style="color: #BB0000;">NA</span>                6 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>       3      172 1861-11-28       1861-12-02   <span style="color: #BB0000;">NA</span>                4 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>       4      180 1861-11-27       1861-11-28   <span style="color: #BB0000;">NA</span>               13 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>       5       45 1861-11-22       1861-11-27   <span style="color: #BB0000;">NA</span>                8 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>       6      180 1861-11-26       1861-11-29   <span style="color: #BB0000;">NA</span>               12 m     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: family_ID &lt;int&gt;, class &lt;fct&gt;, complications &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   x_loc &lt;dbl&gt;, y_loc &lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // tags: date_onset:date_of_prodrome, date_death:date_of_death, gender:gender, age:age</span></span></code></pre></div>
<p>The printing of the object confirms that the tags have been added. If
we want to double-check which variables have been tagged:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tags.html">tags</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; $date_onset</span></span>
<span><span class="co">#&gt; [1] "date_of_prodrome"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $date_death</span></span>
<span><span class="co">#&gt; [1] "date_of_death"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $gender</span></span>
<span><span class="co">#&gt; [1] "gender"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $age</span></span>
<span><span class="co">#&gt; [1] "age"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="changing-tags">Changing tags<a class="anchor" aria-label="anchor" href="#changing-tags"></a>
</h3>
<p>Tags can be added / removed / changed using
<code><a href="../reference/set_tags.html">set_tags()</a></code>.</p>
<p>Let us assume we also want to record the outcome: it is currently
missing, but can be built from dates of deaths (missing date =
survived). This can be done by using <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> on
<code>x</code> to create the new variable (remember <code>x</code> is
not only a <code>linelist</code>, but also a regular <code>tibble</code>
and this compatible with <code>dplyr</code> verbs), and setting up a new
tag using <code><a href="../reference/set_tags.html">set_tags()</a></code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    inferred_outcome <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">date_of_death</span><span class="op">)</span>, <span class="st">"survived"</span>, <span class="st">"died"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_tags.html">set_tags</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="st">"inferred_outcome"</span><span class="op">)</span></span>
<span><span class="va">x</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // linelist object</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 188 × 13</span></span></span>
<span><span class="co">#&gt;    case_ID infector date_of_prodrome date_of_rash date_of_death   age gender</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>       1       45 1861-11-21       1861-11-25   <span style="color: #BB0000;">NA</span>                7 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>       2       45 1861-11-23       1861-11-27   <span style="color: #BB0000;">NA</span>                6 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>       3      172 1861-11-28       1861-12-02   <span style="color: #BB0000;">NA</span>                4 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>       4      180 1861-11-27       1861-11-28   <span style="color: #BB0000;">NA</span>               13 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>       5       45 1861-11-22       1861-11-27   <span style="color: #BB0000;">NA</span>                8 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>       6      180 1861-11-26       1861-11-29   <span style="color: #BB0000;">NA</span>               12 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>       7       42 1861-11-24       1861-11-28   <span style="color: #BB0000;">NA</span>                6 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>       8       45 1861-11-21       1861-11-26   <span style="color: #BB0000;">NA</span>               10 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>       9      182 1861-11-26       1861-11-30   <span style="color: #BB0000;">NA</span>               13 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      10       45 1861-11-21       1861-11-25   <span style="color: #BB0000;">NA</span>                7 f     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 178 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 6 more variables: family_ID &lt;int&gt;, class &lt;fct&gt;, complications &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   x_loc &lt;dbl&gt;, y_loc &lt;dbl&gt;, inferred_outcome &lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // tags: date_onset:date_of_prodrome, date_death:date_of_death, gender:gender, age:age, outcome:inferred_outcome</span></span></code></pre></div>
<p>If we wanted to undo the above, i.e. remove the <code>outcome</code>
tag, we only need set it to <code>NULL</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_tags.html">set_tags</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tags.html">tags</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; $date_onset</span></span>
<span><span class="co">#&gt; [1] "date_of_prodrome"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $date_death</span></span>
<span><span class="co">#&gt; [1] "date_of_death"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $gender</span></span>
<span><span class="co">#&gt; [1] "gender"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $age</span></span>
<span><span class="co">#&gt; [1] "age"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="accessing-tagged-variables">Accessing tagged variables<a class="anchor" aria-label="anchor" href="#accessing-tagged-variables"></a>
</h3>
<p>Now that key variables have been tagged in <code>x</code>, we can
used these pre-defined fields in downstream analyses, without having to
worry about variable names and types. We could access tagged variables
using any of the following means:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># select tagged variables only</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="../reference/has_tag.html">has_tag</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date_onset"</span>, <span class="st">"date_death"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: The following tags have lost their variable:</span></span>
<span><span class="co">#&gt;  gender:gender, age:age</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // linelist object</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 188 × 2</span></span></span>
<span><span class="co">#&gt;    date_of_prodrome date_of_death</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1861-11-21       <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1861-11-23       <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1861-11-28       <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1861-11-27       <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1861-11-22       <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1861-11-26       <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1861-11-24       <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1861-11-21       <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1861-11-26       <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1861-11-21       <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 178 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // tags: date_onset:date_of_prodrome, date_death:date_of_death</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># select tagged variables only with renaming on the fly</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span>onset <span class="op">=</span> <span class="fu"><a href="../reference/has_tag.html">has_tag</a></span><span class="op">(</span><span class="st">"date_onset"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: The following tags have lost their variable:</span></span>
<span><span class="co">#&gt;  date_death:date_of_death, gender:gender, age:age</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // linelist object</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 188 × 1</span></span></span>
<span><span class="co">#&gt;    onset     </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1861-11-21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1861-11-23</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1861-11-28</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1861-11-27</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1861-11-22</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1861-11-26</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1861-11-24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1861-11-21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1861-11-26</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1861-11-21</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 178 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // tags: date_onset:onset</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># get all tagged variables in a data.frame</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/tags_df.html">tags_df</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 188 × 4</span></span></span>
<span><span class="co">#&gt;    date_onset date_death gender   age</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1861-11-21 <span style="color: #BB0000;">NA</span>         f          7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1861-11-23 <span style="color: #BB0000;">NA</span>         f          6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1861-11-28 <span style="color: #BB0000;">NA</span>         f          4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1861-11-27 <span style="color: #BB0000;">NA</span>         m         13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1861-11-22 <span style="color: #BB0000;">NA</span>         f          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1861-11-26 <span style="color: #BB0000;">NA</span>         m         12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1861-11-24 <span style="color: #BB0000;">NA</span>         m          6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1861-11-21 <span style="color: #BB0000;">NA</span>         m         10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1861-11-26 <span style="color: #BB0000;">NA</span>         m         13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1861-11-21 <span style="color: #BB0000;">NA</span>         f          7</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 178 more rows</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-safeguards">Using safeguards<a class="anchor" aria-label="anchor" href="#using-safeguards"></a>
</h3>
<p>Because <code>x</code> remains a valid <code>tibble</code>, we can
use any data handling operations implemented in <code>dplyr</code>.
However, some of these operations may cause accidental removal of key
tagged variables. <em>linelist</em> provides a safeguard mechanism
against this. For instance, let’s assume we want to select only some
columns of <code>x</code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: The following tags have lost their variable:</span></span>
<span><span class="co">#&gt;  date_onset:date_of_prodrome, date_death:date_of_death, gender:gender, age:age</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // linelist object</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 188 × 2</span></span></span>
<span><span class="co">#&gt;    case_ID infector</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>       1       45</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>       2       45</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>       3      172</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>       4      180</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>       5       45</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>       6      180</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>       7       42</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>       8       45</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>       9      182</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      10       45</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 178 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // tags: [no tagged variable]</span></span></code></pre></div>
<p>Here, the above command gave a meaningful warning, in which
<code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> removes some of the variables that were
tagged.</p>
<p>We can also use the <code><a href="../reference/has_tag.html">has_tag()</a></code> select helper to select
columns via their tag. For example, to retain the first 2 variables, and
the <code>gender</code> tag:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># hybrid selection</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fu"><a href="../reference/has_tag.html">has_tag</a></span><span class="op">(</span><span class="st">"gender"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: The following tags have lost their variable:</span></span>
<span><span class="co">#&gt;  date_onset:date_of_prodrome, date_death:date_of_death, age:age</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // linelist object</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 188 × 3</span></span></span>
<span><span class="co">#&gt;    case_ID infector gender</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>       1       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>       2       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>       3      172 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>       4      180 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>       5       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>       6      180 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>       7       42 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>       8       45 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>       9      182 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      10       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 178 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // tags: gender:gender</span></span></code></pre></div>
<p>Again, we observe a warning as before due to the loss of tagged
variables in the operation. This behaviour can be silenced if needed, or
could be changed to issue an error (for stronger pipelines for
instance):</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># hybrid selection</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fu"><a href="../reference/has_tag.html">has_tag</a></span><span class="op">(</span><span class="st">"gender"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: The following tags have lost their variable:</span></span>
<span><span class="co">#&gt;  date_onset:date_of_prodrome, date_death:date_of_death, age:age</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // linelist object</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 188 × 3</span></span></span>
<span><span class="co">#&gt;    case_ID infector gender</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>       1       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>       2       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>       3      172 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>       4      180 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>       5       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>       6      180 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>       7       42 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>       8       45 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>       9      182 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      10       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 178 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // tags: gender:gender</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># hybrid selection - no warning</span></span>
<span><span class="fu"><a href="../reference/lost_tags_action.html">lost_tags_action</a></span><span class="op">(</span><span class="st">"none"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Lost tags will now be ignored.</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fu"><a href="../reference/has_tag.html">has_tag</a></span><span class="op">(</span><span class="st">"gender"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // linelist object</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 188 × 3</span></span></span>
<span><span class="co">#&gt;    case_ID infector gender</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>       1       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>       2       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>       3      172 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>       4      180 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>       5       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>       6      180 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>       7       42 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>       8       45 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>       9      182 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      10       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 178 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // tags: gender:gender</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># hybrid selection - error due to lost tags</span></span>
<span><span class="fu"><a href="../reference/lost_tags_action.html">lost_tags_action</a></span><span class="op">(</span><span class="st">"error"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Lost tags will now issue an error.</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fu"><a href="../reference/has_tag.html">has_tag</a></span><span class="op">(</span><span class="st">"gender"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: The following tags have lost their variable:</span></span>
<span><span class="co">#&gt;  date_onset:date_of_prodrome, date_death:date_of_death, age:age</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># note that `lost_tags_action` sets the behavior for any later operation, so we</span></span>
<span><span class="co"># need to reset the default</span></span>
<span><span class="fu"><a href="../reference/lost_tags_action.html">get_lost_tags_action</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># check current behaviour</span></span>
<span><span class="co">#&gt; [1] "error"</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/lost_tags_action.html">lost_tags_action</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># reset default</span></span>
<span><span class="co">#&gt; Lost tags will now issue a warning.</span></span></code></pre></div>
<div class="section level4">
<h4 id="changing-tag-loss-action-permanently">Changing tag loss action permanently<a class="anchor" aria-label="anchor" href="#changing-tag-loss-action-permanently"></a>
</h4>
<p>If you wish to change the <code>lost_tags_action</code> in a way that
persists across R sessions, you can do so by setting the
<code>LINELIST_LOST_ACTION</code> environment variable. For example,
your <code>.Renviron</code> file could contain the following line:</p>
<pre class="text"><code><span><span class="va">LINELIST_LOST_ACTION</span><span class="op">=</span><span class="st">"error"</span></span></code></pre>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hugo Gruson, Thibaut Jombart.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.9000.</p>
</div>

    </footer>
</div>





  </body>
</html>
